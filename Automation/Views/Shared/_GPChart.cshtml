@using System.Text
@model Automation.ViewModels.GPOViewModel

<div class="col-lg-12 ui-sortable widgets">
    <div class="panel panel-inverse">
        <div class="panel-heading">
            <div class="panel-heading-btn">
                <a href="#" class="btn btn-xs btn-icon btn-warning" data-click="panel-collapse" title="Collapse Panel"><i class="fas fa-minus"></i></a>
            </div>
            <h4 class="panel-title">GPO Health</h4>
        </div>
        <div class="panel-body">
            <canvas id="chart-div"></canvas>
        </div>
    </div>
    <div class="panel panel-inverse">
        <div class="panel-heading">
            <h4 class="panel-title">GPO Health</h4>
        </div>
        <div class="panel-body">
            <canvas id="chart-div2"></canvas>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(".widgets").sortable({
        handle: ".panel-heading",
        cursor: "move",
        opacity: 0.5,
        stop: function (event, ui) {
            $("#json").val(
                JSON.stringify(
                    $("#widgets").sortable(
                        'toArray',
                        {
                            attribute: 'id'
                        }
                    )
                )
            );
        }
    });
    var dynamicColours = function () {
        var r = Math.floor(Math.random() * 255);
        var g = Math.floor(Math.random() * 255);
        var b = Math.floor(Math.random() * 255);
        return "rgb(" + r + "," + g + "," + b + ")";
    };

    var ctx = document.getElementById('chart-div');
    var GPOPieChart = new Chart(ctx,
    {
        type: 'doughnut',
        data: {
                labels: ["Healthy","Error"],
                datasets: [
                    {
                        label: "GPO's",
                        backgroundColor:["Green","Red"],
                        data: ["@Model.Healthy","@Model.Error"]
                    }
                ]
        },
        options: {
            title: {
                display: true,
                text: "GPO Health '@Model.Domain'"
            }
        }
});

</script>